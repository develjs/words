webpackJsonp([1],{"1C5s":function(t,n){},"5jJP":function(t,n){t.exports=["static/bigband.txt","static/luka.txt","static/ann-from-green-gables.txt"]},"9jYv":function(t,n){},MuaX:function(t,n){const s=/[\n\r\s\u2000-\u20FF\+\!"\\\/\(\),\.\:\;’'\<\=\>\?\[\]\{\|\}“”…]+/g,e=/[\#0123456789\$\%\&\@\*\^_\~]/,o=["nbsp","s","ll","re","t","ve","d","m","dr","mr","mrs"],r=["es","s","ed","ly","ing"];t.exports={WordsHandler:class{constructor(t,n,s={}){this.words=t||[],this.counts=n||{},this.count=0,this.charsCount=0,this.noSuffix=s.noSuffix}getWords(){return this.words}getCounts(){return this.counts}getCount(){return this.count}getIndex(t,n){let s=n;s||(s=[...this.words]).sort((t,n)=>(this.counts[n]||0)-(this.counts[t]||0));const e=[];let o=0,r=0;for(;o<s.length;o++){let i=s[o];if(n&&this.noSuffix){const t=this.findIndex(i,this.noSuffix);if(t<0)continue;i=this.words[t]}if(this.counts[i]&&!e.includes(i)&&(e.push(i),(r+=this.counts[i]||0)/this.count>t))break}return console.log(r+"/"+this.count+"="+r/this.count+", index="+o),r/this.count<t?NaN:o}add(t){if(!t||o.includes(t)||e.test(t))return this;let n=this.findIndex(t,this.noSuffix),s=n<0?t:this.words[n];return s.length>t.length&&(this.replace(n,t),s=t),n<0&&this.words.push(s),this.counts[s]=(this.counts[s]||0)+1,this.count++,this}replace(t,n){const s=this.words[t];this.words[t]=n,this.counts[n]=this.counts[s],delete this.counts[s]}findIndex(t,n){let s=this.words.indexOf(t);if(s>=0||!n||t.length<2)return s;for(const n of r){if(t.endsWith(n)&&t.length-n.length>1){const e=t.substr(0,t.length-n.length);if((s=this.words.indexOf(e))>=0)return s}const e=t+n;if((s=this.words.indexOf(e))>=0)return s}return s}remove(t){const n=this.words.indexOf(t);return n<0?this:(this.words.splice(n,1),this.counts[t]&&delete this.counts[t],this)}normalize(t){return t=(t=t.replace(s," ")).trim().toLowerCase().replace(/^[-]+|[-]+$/g,"")}parse(t,n){return t.split(s).forEach(t=>{!(t=this.normalize(t))||n&&n.includes(t)||this.add(t)}),this.charsCount+=t.length,this}sort(){return this.words.sort((t,n)=>(this.counts[n]||0)-(this.counts[t]||0)),this}exportCounts(){return this.words.reduce((t,n)=>(t[n]=this.counts[n]||1,t),{})}},wordsJoinedEx:(t,n)=>{let s=[];return[...t].sort().forEach(t=>{let n=function(t){for(let n=0;n<r.length;n++)if(t.endsWith(r[n]))return t.substr(0,t.length-r[n].length);return t}(t);if(n!=t){let e=s[s.length-1];if(n&&e.startsWith(n)&&function(t){return r.map(t=>{})}().concat(n).indexOf(e)>=0)return void(s[s.length-1]+=","+t)}s.push(t)}),s.map(t=>{let s=0;return t.split(",").forEach(t=>s+=n[t]||1),{word:t,count:s||1}})}}},NHnr:function(t,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=s("7+uW"),o=s("Xxa5"),r=s.n(o),i=s("exGp"),a=s.n(i),c=s("5jJP");console.log(c);var u={name:"Source",data:function(){return this.init(),{presets:c,text:""}},methods:{init:function(){},next:function(){var t=this;return a()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("parseText",t.text);case 2:t.$emit("next");case 3:case"end":return n.stop()}},n,t)}))()},loadPreset:function(t){var n=this;fetch(t).then(function(t){return t.text()}).then(function(t){n.text=t,setTimeout(function(){M.textareaAutoResize(n.$refs.text)},1)})}}},l={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",[s("p",[t._v("\n        Paste your one text below or select one of presets:\n        "),t._l(t.presets,function(n){return s("span",[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.loadPreset(n)}}},[t._v(t._s(n.split("/").pop().replace(/\..*$/,"")))]),t._v(" \n        ")])})],2),t._v(" "),s("a",{staticClass:"waves-effect waves-light btn",attrs:{href:"javascript:void(0)"},on:{click:t.next}},[t._v("Parse =>")]),s("br"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"text",staticClass:"materialize-textarea",staticStyle:{width:"90%"},attrs:{placeholder:"Insert a text here"},domProps:{value:t.text},on:{input:function(n){n.target.composing||(t.text=n.target.value)}}})])},staticRenderFns:[]};var d=s("VU/8")(u,l,!1,function(t){s("sP3U")},"data-v-3102a01b",null).exports,f=s("Gu7T"),h=s.n(f),v={name:"WordsList",data:function(){return{suffix:!0,sortCount:!0}},computed:{words:function(){var t=void 0;return t=this.suffix?[].concat(h()(this.$store.getters.wordsJoinedEx)):[].concat(h()(this.$store.getters.wordsEx)),this.sortCount&&t.sort(function(t,n){return n.count-t.count}),t},counts:function(){return this.$store.state.counts}},methods:{addKnown:function(t){this.$store.commit("addKnown",t)},level:function(t){var n=t.split(",").map(function(t){return t.trim()}),s=this.$store.state.list10000||[];if(0===s.length)return"";var e=Math.min.apply(Math,h()(n.map(function(t){return s.indexOf(t)}).filter(function(t){return-1!==t})));return e===1/0||-1===e?"":e<1e3?"A1 ("+(e+1)+")":e<2500?"A2 ("+(e+1)+")":e<3500?"B1 ("+(e+1)+")":e<5e3?"B2 ("+(e+1)+")":e<7500?"C1 ("+(e+1)+")":"C2 ("+(e+1)+")"}}},w={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",[s("span",{staticClass:"switch"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.suffix,expression:"suffix"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.suffix)?t._i(t.suffix,null)>-1:t.suffix},on:{change:function(n){var s=t.suffix,e=n.target,o=!!e.checked;if(Array.isArray(s)){var r=t._i(s,null);e.checked?r<0&&(t.suffix=s.concat([null])):r>-1&&(t.suffix=s.slice(0,r).concat(s.slice(r+1)))}else t.suffix=o}}}),t._v(" "),s("span",{staticClass:"lever"}),t._v("\n            Consider a suffix\n        ")])]),t._v(" "),s("span",{staticClass:"switch"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortCount,expression:"sortCount"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sortCount)?t._i(t.sortCount,null)>-1:t.sortCount},on:{change:function(n){var s=t.sortCount,e=n.target,o=!!e.checked;if(Array.isArray(s)){var r=t._i(s,null);e.checked?r<0&&(t.sortCount=s.concat([null])):r>-1&&(t.sortCount=s.slice(0,r).concat(s.slice(r+1)))}else t.sortCount=o}}}),t._v(" "),s("span",{staticClass:"lever"}),t._v("\n            Sort by count\n        ")])]),t._v(" "),s("table",{staticClass:"highlight"},[s("tbody",t._l(t.words,function(n){return s("tr",[s("td",[t._v(t._s(n.word))]),t._v(" "),s("td",[t._v(t._s(n.count))]),t._v(" "),s("td",[t._v(t._s(t.level(n.word)))]),t._v(" "),s("td",[s("button",{staticClass:"waves-effect waves-light btn",on:{click:function(s){return t.addKnown(n.word)}}},[t._v("Known")])])])}),0)])])},staticRenderFns:[]};var p={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",[s("table",{staticClass:"highlight"},[s("tbody",t._l(t.knowns,function(n){return s("tr",[s("td",[t._v(t._s(n))]),t._v(" "),s("td",[s("button",{staticClass:"waves-effect waves-light btn",on:{click:function(s){return t.remove(n)}}},[t._v("revert")])])])}),0)])])},staticRenderFns:[]};var x={name:"App",components:{Source:d,WordsList:s("VU/8")(v,w,!1,function(t){s("9jYv")},"data-v-1e88d38a",null).exports,Knowns:s("VU/8")({name:"Knowns",computed:{knowns:function(){return this.$store.state.knowns}},methods:{remove:function(t){this.$store.commit("delKnown",t)}}},p,!1,function(t){s("krzS")},"data-v-0b2fcba2",null).exports},data:function(){return{showTab:"source"}},methods:{activeTab:function(t){this.showTab=t,M.Tabs.getInstance(document.querySelector(".tabs")).select(t)}},mounted:function(){M.AutoInit()},created:function(){var t=this;fetch("static/knowns.list").then(function(t){return t.text()}).then(function(n){t.$store.commit("initKnowns",n.split(/[\n\r]+/))})}},m={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"row",attrs:{id:"tabs"}},[s("div",{staticClass:"col s12"},[s("ul",{staticClass:"tabs"},[s("li",{staticClass:"tab col s3"},[s("a",{class:{active:"source"==t.showTab},attrs:{href:"#source"},on:{click:function(n){t.showTab="source"}}},[t._v("Source")])]),t._v(" "),s("li",{staticClass:"tab col s3"},[s("a",{class:{active:"words"==t.showTab},attrs:{href:"#words"},on:{click:function(n){t.showTab="words"}}},[t._v("Words")])]),t._v(" "),s("li",{staticClass:"tab col s3"},[s("a",{class:{active:"knowns"==t.showTab},attrs:{href:"#knowns"},on:{click:function(n){t.showTab="knowns"}}},[t._v("Knowns")])])])]),t._v(" "),"source"==t.showTab?s("div",{staticClass:"col s12"},[s("Source",{ref:"source",on:{next:function(n){return t.activeTab("words")}}})],1):t._e(),t._v(" "),"words"==t.showTab?s("div",{staticClass:"col s12"},[s("WordsList",{ref:"words"})],1):t._e(),t._v(" "),"knowns"==t.showTab?s("div",{staticClass:"col s12"},[s("Knowns")],1):t._e()])])},staticRenderFns:[]};var g=s("VU/8")(x,m,!1,function(t){s("1C5s")},null,null).exports,_=s("NYxO"),b=s("MuaX"),k=this;e.a.use(_.a);var C,S=[],y={},T=new b.WordsHandler(S,y),E=(C=a()(r.a.mark(function t(){var n,s,e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("static/10000.txt");case 2:if(!(n=t.sent).ok){t.next=11;break}return t.next=6,n.text();case 6:return s=t.sent,e=s.split(/\r?\n/).filter(function(t){return""!==t.trim()}),t.abrupt("return",e);case 11:return console.warn("Failed to load 10000.txt"),t.abrupt("return",[]);case 13:case"end":return t.stop()}},t,k)})),function(){return C.apply(this,arguments)}),$=new _.a.Store({state:{words:S,counts:y,list10000:[],original:[],knowns:[]},getters:{wordsEx:function(t){return Object(b.wordsEx)(t.words,t.counts)},wordsJoinedEx:function(t){return Object(b.wordsJoinedEx)(t.words,t.counts)}},mutations:{addWord:function(t,n){n&&(t.knowns.indexOf(n)>=0||T.add(n))},doSort:function(t){T.sort()},addKnown:function(t,n){var s=this;n.split(",").forEach(function(n){t.knowns.indexOf(n)<0&&t.knowns.push(n),s.commit("localSave"),T.remove(n),console.log("hide",n)})},delKnown:function(t,n){var s=t.knowns.indexOf(n);s>=0&&t.knowns.splice(s,1),this.commit("localSave")},localSave:function(t){var n=[],s=[];t.knowns.forEach(function(s){t.original.indexOf(s)<0&&n.push(s)}),t.original.forEach(function(n){t.knowns.indexOf(n)<0&&s.push(n)}),localStorage.setItem("add-knowns",n.join(";")),localStorage.setItem("del-knowns",s.join(";"))},localLoad:function(t){(localStorage.getItem("add-knowns")||"").split(";").forEach(function(n){t.knowns.indexOf(n)<0&&t.knowns.push(n)}),(localStorage.getItem("del-knowns")||"").split(";").forEach(function(n){var s=t.knowns.indexOf(n);s>=0&&t.knowns.splice(s,1)})},initKnowns:function(t,n){t.knowns=n,t.original=t.knowns.slice(),this.commit("localLoad")},parseText:function(t,n){T.parse(n,t.knowns),this.commit("doSort")}},actions:{parseText:function(){var t=a()(r.a.mark(function t(n,s){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.state.list10000.length){t.next=5;break}return t.next=3,E();case 3:n.state.list10000=t.sent,console.log(n.state.list10000);case 5:this.commit("parseText",s);case 6:case"end":return t.stop()}},t,this)}));return function(n,s){return t.apply(this,arguments)}}()}});e.a.config.productionTip=!1,new e.a({el:"#app",store:$,components:{App:g},template:"<App/>"})},krzS:function(t,n){},sP3U:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.69a578c43f1a0f3d4e9d.js.map