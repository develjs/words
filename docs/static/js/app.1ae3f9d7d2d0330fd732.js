webpackJsonp([1],{"1C5s":function(t,n){},"5jJP":function(t,n){t.exports=["static/bigband.txt","static/luka.txt","static/ann-from-green-gables.txt"]},MuaX:function(t,n){const e=/[\n\r\s\u2000-\u20FF\+\!"\\\/\(\),\.\:\;’'\<\=\>\?\[\]\{\|\}“”…]+/g,s=/[\#0123456789\$\%\&\@\*\^_\~]/,o=["nbsp","s","ll","re","t","ve","d","m","dr","mr","mrs"],r=["es","s","ed","ly","ing"];t.exports={WordsHandler:class{constructor(t,n,e={}){this.words=t||[],this.counts=n||{},this.count=0,this.charsCount=0,this.noSuffix=e.noSuffix}getWords(){return this.words}getCounts(){return this.counts}getCount(){return this.count}getIndex(t,n){let e=n;e||(e=[...this.words]).sort((t,n)=>(this.counts[n]||0)-(this.counts[t]||0));const s=[];let o=0,r=0;for(;o<e.length;o++){let i=e[o];if(n&&this.noSuffix){const t=this.findIndex(i,this.noSuffix);if(t<0)continue;i=this.words[t]}if(this.counts[i]&&!s.includes(i)&&(s.push(i),(r+=this.counts[i]||0)/this.count>t))break}return console.log(r+"/"+this.count+"="+r/this.count+", index="+o),r/this.count<t?NaN:o}add(t){if(!t||o.includes(t)||s.test(t))return this;let n=this.findIndex(t,this.noSuffix),e=n<0?t:this.words[n];return e.length>t.length&&(this.replace(n,t),e=t),n<0&&this.words.push(e),this.counts[e]=(this.counts[e]||0)+1,this.count++,this}replace(t,n){const e=this.words[t];this.words[t]=n,this.counts[n]=this.counts[e],delete this.counts[e]}findIndex(t,n){let e=this.words.indexOf(t);if(e>=0||!n||t.length<2)return e;for(const n of r){if(t.endsWith(n)&&t.length-n.length>1){const s=t.substr(0,t.length-n.length);if((e=this.words.indexOf(s))>=0)return e}const s=t+n;if((e=this.words.indexOf(s))>=0)return e}return e}remove(t){const n=this.words.indexOf(t);return n<0?this:(this.words.splice(n,1),this.counts[t]&&delete this.counts[t],this)}normalize(t){return t=(t=t.replace(e," ")).trim().toLowerCase().replace(/^[-]+|[-]+$/g,"")}parse(t,n){return t.split(e).forEach(t=>{!(t=this.normalize(t))||n&&n.includes(t)||this.add(t)}),this.charsCount+=t.length,this}sort(){return this.words.sort((t,n)=>(this.counts[n]||0)-(this.counts[t]||0)),this}exportCounts(){return this.words.reduce((t,n)=>(t[n]=this.counts[n]||1,t),{})}},wordsJoinedEx:(t,n)=>{let e=[];return[...t].sort().forEach(t=>{let n=function(t){for(let n=0;n<r.length;n++)if(t.endsWith(r[n]))return t.substr(0,t.length-r[n].length);return t}(t);if(n!=t){let s=e[e.length-1];if(n&&s.startsWith(n)&&function(t){return r.map(t=>{})}().concat(n).indexOf(s)>=0)return void(e[e.length-1]+=","+t)}e.push(t)}),e.map(t=>{let e=0;return t.split(",").forEach(t=>e+=n[t]||1),{word:t,count:e||1}})}}},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("7+uW"),o=e("Xxa5"),r=e.n(o),i=e("exGp"),a=e.n(i),c=e("5jJP");console.log(c);var u={name:"Source",data:function(){return this.init(),{presets:c,text:""}},methods:{init:function(){},next:function(){var t=this;return a()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("parseText",t.text);case 2:t.$emit("next");case 3:case"end":return n.stop()}},n,t)}))()},loadPreset:function(t){var n=this;fetch(t).then(function(t){return t.text()}).then(function(t){n.text=t,setTimeout(function(){M.textareaAutoResize(n.$refs.text)},1)})}}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("p",[t._v("\n        Paste your one text below or select one of presets:\n        "),t._l(t.presets,function(n){return e("span",[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.loadPreset(n)}}},[t._v(t._s(n.split("/").pop().replace(/\..*$/,"")))]),t._v(" \n        ")])})],2),t._v(" "),e("a",{staticClass:"waves-effect waves-light btn",attrs:{href:"javascript:void(0)"},on:{click:t.next}},[t._v("Parse =>")]),e("br"),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"text",staticClass:"materialize-textarea",staticStyle:{width:"90%"},attrs:{placeholder:"Insert a text here"},domProps:{value:t.text},on:{input:function(n){n.target.composing||(t.text=n.target.value)}}})])},staticRenderFns:[]};var d=e("VU/8")(u,l,!1,function(t){e("sP3U")},"data-v-3102a01b",null).exports,f=e("Gu7T"),h=e.n(f),v={name:"WordsList",data:function(){return{suffix:!0,sortCount:!0,selectedOption:""}},computed:{words:function(){var t=this,n=void 0;if(n=this.suffix?[].concat(h()(this.$store.getters.wordsJoinedEx)):[].concat(h()(this.$store.getters.wordsEx)),this.sortCount&&n.sort(function(t,n){return n.count-t.count}),this.selectedOption){var e=["A1","A2","B1","B2","C1","C2"],s=e.indexOf(this.selectedOption),o=e.slice(0,s+1);n=n.filter(function(n){var e=t.level(n.word);return""===e||!o.find(function(t){return e.startsWith(t)})})}return n},counts:function(){return this.$store.state.counts}},methods:{addKnown:function(t){this.$store.commit("addKnown",t)},level:function(t){var n=t.split(",").map(function(t){return t.trim()}),e=this.$store.state.list10000||[];if(0===e.length)return"";var s=Math.min.apply(Math,h()(n.map(function(t){return e.indexOf(t)}).filter(function(t){return-1!==t})));return s===1/0||-1===s?"":s<1e3?"A1 ("+(s+1)+")":s<2500?"A2 ("+(s+1)+")":s<3500?"B1 ("+(s+1)+")":s<5e3?"B2 ("+(s+1)+")":s<7500?"C1 ("+(s+1)+")":"C2 ("+(s+1)+")"}},mounted:function(){var t=this.$refs.select;t&&M.FormSelect.init(t,{})}},p={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("span",{staticClass:"switch"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.suffix,expression:"suffix"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.suffix)?t._i(t.suffix,null)>-1:t.suffix},on:{change:function(n){var e=t.suffix,s=n.target,o=!!s.checked;if(Array.isArray(e)){var r=t._i(e,null);s.checked?r<0&&(t.suffix=e.concat([null])):r>-1&&(t.suffix=e.slice(0,r).concat(e.slice(r+1)))}else t.suffix=o}}}),t._v(" "),e("span",{staticClass:"lever"}),t._v("\n            Consider a suffix\n        ")])]),t._v(" "),e("span",{staticClass:"switch"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortCount,expression:"sortCount"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sortCount)?t._i(t.sortCount,null)>-1:t.sortCount},on:{change:function(n){var e=t.sortCount,s=n.target,o=!!s.checked;if(Array.isArray(e)){var r=t._i(e,null);s.checked?r<0&&(t.sortCount=e.concat([null])):r>-1&&(t.sortCount=e.slice(0,r).concat(e.slice(r+1)))}else t.sortCount=o}}}),t._v(" "),e("span",{staticClass:"lever"}),t._v("\n            Sort by count\n        ")])]),t._v(" "),e("span",{staticClass:"input-field"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],ref:"select",on:{change:function(n){var e=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedOption=n.target.multiple?e:e[0]}}},[e("option",{attrs:{value:""}},[t._v("Show all levels")]),t._v(" "),e("option",{attrs:{value:"A1"}},[t._v("Hide until A1")]),t._v(" "),e("option",{attrs:{value:"A2"}},[t._v("Hide until A2")]),t._v(" "),e("option",{attrs:{value:"B1"}},[t._v("Hide until B1")]),t._v(" "),e("option",{attrs:{value:"B2"}},[t._v("Hide until B2")]),t._v(" "),e("option",{attrs:{value:"C1"}},[t._v("Hide until C1")])]),t._v(" "),e("label",[t._v("Difficulty Level")])]),t._v(" "),e("table",{staticClass:"highlight"},[e("tbody",t._l(t.words,function(n){return e("tr",[e("td",[t._v(t._s(n.word))]),t._v(" "),e("td",[t._v(t._s(n.count))]),t._v(" "),e("td",[t._v(t._s(t.level(n.word)))]),t._v(" "),e("td",[e("button",{staticClass:"waves-effect waves-light btn",on:{click:function(e){return t.addKnown(n.word)}}},[t._v("Known")])])])}),0)])])},staticRenderFns:[]};var w={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("table",{staticClass:"highlight"},[e("tbody",t._l(t.knowns,function(n){return e("tr",[e("td",[t._v(t._s(n))]),t._v(" "),e("td",[e("button",{staticClass:"waves-effect waves-light btn",on:{click:function(e){return t.remove(n)}}},[t._v("revert")])])])}),0)])])},staticRenderFns:[]};var x={name:"App",components:{Source:d,WordsList:e("VU/8")(v,p,!1,function(t){e("PHC3")},"data-v-88fb5494",null).exports,Knowns:e("VU/8")({name:"Knowns",computed:{knowns:function(){return this.$store.state.knowns}},methods:{remove:function(t){this.$store.commit("delKnown",t)}}},w,!1,function(t){e("krzS")},"data-v-0b2fcba2",null).exports},data:function(){return{showTab:"source"}},methods:{activeTab:function(t){this.showTab=t,M.Tabs.getInstance(document.querySelector(".tabs")).select(t)}},mounted:function(){M.AutoInit()},created:function(){var t=this;fetch("static/knowns.list").then(function(t){return t.text()}).then(function(n){t.$store.commit("initKnowns",n.split(/[\n\r]+/))})}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"row",attrs:{id:"tabs"}},[e("div",{staticClass:"col s12"},[e("ul",{staticClass:"tabs"},[e("li",{staticClass:"tab col s3"},[e("a",{class:{active:"source"==t.showTab},attrs:{href:"#source"},on:{click:function(n){t.showTab="source"}}},[t._v("Source")])]),t._v(" "),e("li",{staticClass:"tab col s3"},[e("a",{class:{active:"words"==t.showTab},attrs:{href:"#words"},on:{click:function(n){t.showTab="words"}}},[t._v("Words")])]),t._v(" "),e("li",{staticClass:"tab col s3"},[e("a",{class:{active:"knowns"==t.showTab},attrs:{href:"#knowns"},on:{click:function(n){t.showTab="knowns"}}},[t._v("Knowns")])])])]),t._v(" "),"source"==t.showTab?e("div",{staticClass:"col s12"},[e("Source",{ref:"source",on:{next:function(n){return t.activeTab("words")}}})],1):t._e(),t._v(" "),"words"==t.showTab?e("div",{staticClass:"col s12"},[e("WordsList",{ref:"words"})],1):t._e(),t._v(" "),"knowns"==t.showTab?e("div",{staticClass:"col s12"},[e("Knowns")],1):t._e()])])},staticRenderFns:[]};var _=e("VU/8")(x,m,!1,function(t){e("1C5s")},null,null).exports,g=e("NYxO"),b=e("MuaX"),k=this;s.a.use(g.a);var C,S=[],y={},O=new b.WordsHandler(S,y),A=(C=a()(r.a.mark(function t(){var n,e,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("static/10000.txt");case 2:if(!(n=t.sent).ok){t.next=11;break}return t.next=6,n.text();case 6:return e=t.sent,s=e.split(/\r?\n/).filter(function(t){return""!==t.trim()}),t.abrupt("return",s);case 11:return console.warn("Failed to load 10000.txt"),t.abrupt("return",[]);case 13:case"end":return t.stop()}},t,k)})),function(){return C.apply(this,arguments)}),T=new g.a.Store({state:{words:S,counts:y,list10000:[],original:[],knowns:[]},getters:{wordsEx:function(t){return Object(b.wordsEx)(t.words,t.counts)},wordsJoinedEx:function(t){return Object(b.wordsJoinedEx)(t.words,t.counts)}},mutations:{addWord:function(t,n){n&&(t.knowns.indexOf(n)>=0||O.add(n))},doSort:function(t){O.sort()},addKnown:function(t,n){var e=this;n.split(",").forEach(function(n){t.knowns.indexOf(n)<0&&t.knowns.push(n),e.commit("localSave"),O.remove(n),console.log("hide",n)})},delKnown:function(t,n){var e=t.knowns.indexOf(n);e>=0&&t.knowns.splice(e,1),this.commit("localSave")},localSave:function(t){var n=[],e=[];t.knowns.forEach(function(e){t.original.indexOf(e)<0&&n.push(e)}),t.original.forEach(function(n){t.knowns.indexOf(n)<0&&e.push(n)}),localStorage.setItem("add-knowns",n.join(";")),localStorage.setItem("del-knowns",e.join(";"))},localLoad:function(t){(localStorage.getItem("add-knowns")||"").split(";").forEach(function(n){t.knowns.indexOf(n)<0&&t.knowns.push(n)}),(localStorage.getItem("del-knowns")||"").split(";").forEach(function(n){var e=t.knowns.indexOf(n);e>=0&&t.knowns.splice(e,1)})},initKnowns:function(t,n){t.knowns=n,t.original=t.knowns.slice(),this.commit("localLoad")},parseText:function(t,n){O.parse(n,t.knowns),this.commit("doSort")}},actions:{parseText:function(){var t=a()(r.a.mark(function t(n,e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.state.list10000.length){t.next=4;break}return t.next=3,A();case 3:n.state.list10000=t.sent;case 4:this.commit("parseText",e);case 5:case"end":return t.stop()}},t,this)}));return function(n,e){return t.apply(this,arguments)}}()}});s.a.config.productionTip=!1,new s.a({el:"#app",store:T,components:{App:_},template:"<App/>"})},PHC3:function(t,n){},krzS:function(t,n){},sP3U:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.1ae3f9d7d2d0330fd732.js.map